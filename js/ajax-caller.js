;(function($){'use strict';$("body").on("click","a[data-ajax]",function(e){e.preventDefault();window.ajaxCaller.doAjax(this,this.href,$(this).data());}).on("submit","form[data-ajax]",function(e){e.preventDefault();window.ajaxCaller.doAjax(this,this.action,$(this).serialize());});$("body").on("click","form[data-ajax] button[type='submit']",function(e){e.preventDefault();$(this).prop('disabled','disabled');$(this).parents('form:first').submit();});})(jQuery);window.ajaxCaller=window.ajaxCaller||{};window.ajaxCaller.loadResponse=function(target,resp,el){if(target!==undefined&&target.selector!==''){if(resp.content!==undefined){target.html(resp.content);if($('#click-review-course').length>0){$('#click-review-course').click();if($(window).width()<543){$('body').css('overflow','auto');$('main').removeClass('popup-review-lesson');}}}else{target.html(resp);}}if(resp.showModal!==undefined&&resp.content!==undefined){bootbox.dialog({message:'<div style="text-align: center;">'+resp.content+'</div>',closeButton:true,backdrop:true,onEscape:true});}if($(el).is("form")&&$(el).data("keep-values")!==true&&$(el).data("keep-values")!=='true'){el.reset();var submitBtn=$(el).find('button[type=submit]');if(submitBtn.length>0){submitBtn.prop('disabled',false);}}$(el).trigger("ajax.updated",[resp]);};window.ajaxCaller.doAjax=function(el,url,submitData){var data=$(el).data(),title=el.title||$(el).text()||url,targetSelector=$(el).data("target"),$target=$(targetSelector);if(!$(el).is("form")){$target.removeData("bs.modal").removeData("modal");if(data.pushState!=="false"&&data.pushState!==false){window.history.pushState(data,title,url);}if(data.toggle==="popup"){$target.one("shown.bs.modal",function(e){window.history.replaceState('kyna','kyna',submitData['currentUrl']);$.get(url,submitData,function(resp){var $modalContent=$(e.target).find('.modal-content');window.ajaxCaller.loadResponse($modalContent,resp,el);});});$target.one("hidden.bs.modal",function(e){$(e.target).removeData("bs.modal").removeData("modal").find(".modal-content").empty();if(data.pushState!=="false"&&data.pushState!==false){window.history.back();}if(data.disableParent){$(el).addClass('disabled');}if(data.disableParentText){$(el).text(data.disableParentText);}});$target.modal("show");return;}$.get(url,submitData,function(resp){window.ajaxCaller.loadResponse($target,resp,el);});}else{var submitBtn=$(el).find('button[type=submit]');if(submitBtn.length>0){submitBtn.prop('disabled','disabled');}if(el.method!=='get'&&el.method!=='GET'){$.post(url,submitData,function(resp){window.ajaxCaller.loadResponse($target,resp,el);if(submitBtn.length>0){submitBtn.removeAttr('disabled');}});}else{$.get(url,submitData,function(resp){window.ajaxCaller.loadResponse($target,resp,el);if(submitBtn.length>0){submitBtn.removeAttr('disabled');}});}}}